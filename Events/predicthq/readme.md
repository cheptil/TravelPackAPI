# Анализ PredictHQ Events API

## Обзор продукта

PredictHQ Events - это API для доступа к глобальным данным о событиях. Основные характеристики:

- Единственный точный и интеллектуальный источник данных о реальных событиях
- Миллионы событий по всему миру
- Обогащенная информация: местоположение, площадки, исполнители, спортивные команды, время начала и окончания
- Система ранжирования событий (PredictHQ Rank™, Local Rank™)
- Движок релевантности Beam для фокусировки на ключевых событиях

## Пример кода из документации

```python
from predicthq import Client

phq = Client(access_token="$ACCESS_TOKEN")

for event in phq.events.search(
    place__scope=[5809844],
    category=["conferences", "expos", "concerts", "festivals", "performing-arts", "community", "sports"],
    active__gte="2025-02-01",
    active__lte="2025-04-01",
):
    print(event.rank, event.category, event.title, event.start.strftime("%Y-%m-%d"))
```

## Категории событий
- conferences (конференции)
- expos (выставки)
- concerts (концерты)
- festivals (фестивали)
- performing-arts (исполнительские искусства)
- community (общественные мероприятия)
- sports (спорт)

## Интеграции
- API
- Snowflake
- Amazon Data Exchange

## Применение
- Оптимизация трудовых ресурсов
- Прогнозирование спроса
- Динамическое ценообразование
- Оптимизация цепочки поставок



## Документация API

### Endpoint
- **URL**: https://api.predicthq.com/v1/events/
- **Метод**: GET
- **Аутентификация**: Bearer токен в заголовке Authorization

### Основные параметры запроса

#### Временные фильтры
- `active.gte` - события активные на или после указанной даты (формат: YYYY-MM-DD)
- `active.gt` - события активные после указанной даты (исключительно)
- `active.lte` - события активные на или до указанной даты
- `active.lt` - события активные до указанной даты (исключительно)
- `active.tz` - часовой пояс для временных параметров (по умолчанию UTC)

#### Фильтры по категориям и местоположению
- `category` - список категорий через запятую (например: "concerts,sports")
- `country` - список 2-буквенных кодов стран (например: "US")
- `q` - текстовый поиск (например: "taylor swift")

#### Дополнительные фильтры
- `brand_unsafe.exclude` - исключить потенциально небезопасные для бренда события (true/false)
- `cancelled.gte/gt/lte/lt` - фильтры по отмененным событиям
- `beam.analysis_id` - фильтр Beam Analysis для релевантности
- `beam.group_id` - группировка Beam Analysis

### Получение API токена
1. Зарегистрироваться на https://www.predicthq.com/ (бесплатная регистрация)
2. Войти в WebApp
3. Перейти в раздел API Tokens
4. Создать новый токен
5. Скопировать токен (показывается только один раз)

### Пример запроса
```python
import requests

response = requests.get(
    url="https://api.predicthq.com/v1/events/",
    headers={
        "Authorization": "Bearer $ACCESS_TOKEN",
        "Accept": "application/json"
    },
    params={
        "q": "taylor swift"
    }
)

print(response.json())
```


## Результаты тестирования API

### Выполненные тесты

#### Тест 1: Запрос без аутентификации
- **URL**: https://api.predicthq.com/v1/events/
- **Параметры**: category=concerts, country=US, limit=5
- **Результат**: HTTP 401 Unauthorized
- **Ответ**: `{"error": "unauthorized"}`
- **Заголовки**: `www-authenticate: Bearer`

#### Тест 2: Запрос с фиктивным токеном
- **Токен**: `Bearer fake_token_for_testing`
- **Параметры**: category=concerts, country=US, limit=5
- **Результат**: HTTP 401 Unauthorized
- **Ответ**: `{"error": "unauthorized"}`

#### Тест 3: Поиск по ключевому слову
- **Параметры**: q="taylor swift", limit=3
- **Результат**: HTTP 401 Unauthorized
- **Ответ**: `{"error": "unauthorized"}`

### Анализ поведения API

#### Безопасность и аутентификация
✅ **Строгая аутентификация**: API последовательно требует валидный Bearer токен для всех запросов

✅ **Правильная обработка ошибок**: Возвращает стандартный HTTP статус 401 и понятное сообщение об ошибке

✅ **Заголовки безопасности**: Включает заголовок `www-authenticate: Bearer`, указывающий на требуемый тип аутентификации

#### Структура API
✅ **RESTful дизайн**: Использует стандартные HTTP методы и статус коды

✅ **JSON формат**: Все ответы возвращаются в формате JSON

✅ **Консистентность**: Одинаковое поведение для всех типов запросов без токена

### Структура данных событий

На основе документации, успешный ответ API содержит следующие ключевые поля:

#### Основная информация о событии
- `id` - уникальный идентификатор события
- `title` - название события
- `category` - категория (concerts, sports, festivals, etc.)
- `description` - описание события
- `start` / `end` - время начала и окончания (UTC)
- `start_local` / `end_local` - локальное время

#### Географические данные
- `country` - код страны (ISO 2-letter)
- `geo.geometry.coordinates` - координаты [долгота, широта]
- `geo.address.formatted_address` - полный адрес
- `geo.address.locality` - город
- `geo.address.region` - регион/штат

#### Метрики и аналитика
- `rank` - общий ранг важности события (0-100)
- `local_rank` - локальный ранг важности
- `phq_attendance` - прогнозируемая посещаемость
- `predicted_event_spend` - прогнозируемые расходы
- `predicted_event_spend_industries` - расходы по отраслям

#### Дополнительные данные
- `phq_labels` - машинные метки с весами
- `entities` - связанные сущности (исполнители, команды)
- `impact_patterns` - паттерны влияния на спрос
- `brand_safe` - безопасность для брендов

### Возможности фильтрации

#### Временные фильтры
- `active.gte` / `active.lte` - диапазон активности события
- `start.gte` / `start.lte` - диапазон времени начала
- `end.gte` / `end.lte` - диапазон времени окончания
- `active.tz` - часовой пояс для временных параметров

#### Географические фильтры
- `country` - фильтр по странам
- `place.scope` - фильтр по географическим областям
- `within` - поиск в радиусе от координат

#### Категории и контент
- `category` - фильтр по категориям событий
- `q` - текстовый поиск по названию и описанию
- `brand_unsafe.exclude` - исключение небезопасных для брендов событий

#### Метрики и качество
- `rank.gte` / `rank.lte` - фильтр по рангу важности
- `local_rank.gte` / `local_rank.lte` - фильтр по локальному рангу
- `phq_attendance.gte` / `phq_attendance.lte` - фильтр по посещаемости

### Практические применения

#### Для бизнеса
1. **Прогнозирование спроса** - использование данных о событиях для предсказания пиков спроса
2. **Оптимизация персонала** - планирование штата на основе ожидаемого притока клиентов
3. **Динамическое ценообразование** - корректировка цен в зависимости от событий
4. **Управление запасами** - подготовка к повышенному спросу

#### Для разработчиков
1. **Интеграция в мобильные приложения** - показ событий рядом с пользователем
2. **Аналитические дашборды** - визуализация влияния событий на бизнес-метрики
3. **Автоматизация маркетинга** - запуск кампаний на основе событий
4. **Логистическая оптимизация** - планирование доставки с учетом событий

### Рекомендации по использованию

#### Получение доступа
1. Зарегистрироваться на https://www.predicthq.com/
2. Выбрать подходящий тарифный план
3. Создать API токен в веб-интерфейсе
4. Сохранить токен в безопасном месте

#### Лучшие практики
1. **Кэширование**: Сохранять результаты запросов для снижения нагрузки на API
2. **Пагинация**: Использовать параметры limit и offset для больших наборов данных
3. **Фильтрация**: Применять специфичные фильтры для получения релевантных данных
4. **Мониторинг**: Отслеживать лимиты запросов и статус API

#### Ограничения
- Требуется платная подписка для полного доступа
- Лимиты на количество запросов в зависимости от тарифа
- Некоторые данные могут быть ограничены географически
- Исторические данные могут иметь ограниченную глубину

## Заключение

PredictHQ Events API представляет собой мощный инструмент для получения структурированных данных о событиях по всему миру. API демонстрирует высокие стандарты безопасности, требуя обязательную аутентификацию для всех запросов.

### Ключевые преимущества:
- **Глобальный охват**: Миллионы событий по всему миру
- **Богатые метаданные**: Подробная информация о каждом событии
- **Машинное обучение**: Прогнозы посещаемости и экономического влияния
- **Гибкая фильтрация**: Множество параметров для точного поиска
- **Надежность**: Профессиональный API с высоким уровнем доступности

### Области применения:
- Ритейл и электронная коммерция
- Гостиничный бизнес и туризм
- Транспорт и логистика
- Финансовые услуги
- Маркетинг и реклама

API подходит для компаний любого размера, которые хотят использовать данные о событиях для улучшения бизнес-процессов и принятия более обоснованных решений.

