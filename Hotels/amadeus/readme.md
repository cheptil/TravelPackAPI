# Анализ Amadeus Hotel Booking API

## Основная информация

**URL документации:** https://developers.amadeus.com/self-service/category/hotels/api-doc/hotel-booking

**Версия API:** 2.0 (также доступна версия 1.0)

**Описание:** 
Amadeus Hotel Booking API позволяет завершать бронирования в более чем 150,000 отелях и размещениях по всему миру.

**Процесс бронирования:**
1. Использовать Amadeus Hotel List API для поиска отелей в желаемом месте
2. Запустить Hotel Search API для изучения лучших предложений отелей
3. После выбора предложения подтвердить последнюю цену и доступность
4. Завершить резервирование с помощью Hotel Booking API, отправив ID предложения, данные гостя и платежную информацию

**Ключевые особенности:**
- API находится в бета-версии и может быть изменен
- API в настоящее время не позволяет отмены бронирований (отмены должны производиться офлайн)
- Поставщики отелей не предлагают комиссии
- Предназначен для разработчиков, желающих встроить процесс резервирования отелей на основе API в свои приложения

**Основной вопрос, на который отвечает API:**
"Я нашел отель, который хочу, как мне забронировать эту комнату?"




## Техническая документация API

**Base URL:** test.api.amadeus.com/v2

**Схема:** HTTPS

**Авторизация:** Требуется access token (см. Authorization Guide)

**Важные предупреждения:**
- Тестовая среда основана на подмножестве продакшн данных и может изменяться динамически
- Для тестов рекомендуется использовать крупные города как LON (Лондон) или NYC (Нью-Йорк)
- **ПРЕДУПРЕЖДЕНИЕ:** Не выполняйте тестовые бронирования в продакшене! Все запросы отправляются и обрабатываются поставщиками отелей. Чрезмерное количество фальшивых/отмененных резерваций приведет к блокировке поставщиками отелей.

**Основной эндпоинт:**
- **POST** `/booking/hotel-orders` - Create Hotel Order (Создание заказа отеля)


## Анализ требований для тестового запроса

### Необходимые компоненты для тестового запроса:

1. **Авторизация:**
   - Требуется access token (OAuth 2.0)
   - Нужно зарегистрироваться на платформе Amadeus для получения API ключей
   - Ссылка на Authorization Guide: https://developers.amadeus.com/self-service/category/hotels/api-doc/hotel-booking/api-reference

2. **Структура запроса:**
   - **Метод:** POST
   - **URL:** https://test.api.amadeus.com/v2/booking/hotel-orders
   - **Content-Type:** application/json

3. **Основные поля в теле запроса (CreateHotelBooking):**
   - `arrivalInformation` - информация о прибытии
   - `payment` - платежная информация
   - `roomAssociations` - ассоциации комнат
   - `travelAgent` - информация о турагенте (обязательное поле)

4. **Дополнительные модели данных:**
   - `Guest` - информация о госте
   - `Address` - адресная информация
   - `Payment Information` - детали платежа
   - `HotelOffer` - предложение отеля (ID предложения из Hotel Search API)

### Ограничения и предупреждения:
- API находится в бета-версии
- Тестовая среда основана на подмножестве продакшн данных
- Рекомендуется использовать крупные города (LON, NYC) для тестов
- **КРИТИЧНО:** Не выполнять реальные бронирования в продакшене!
- Отмены бронирований не поддерживаются через API (только офлайн)
- Поставщики отелей не предлагают комиссии

### Процесс бронирования:
1. Hotel List API → поиск отелей
2. Hotel Search API → получение предложений
3. Hotel Booking API → создание бронирования с offer ID


## Результаты тестового запроса

### Демонстрационный запрос
Был создан и выполнен демонстрационный Python скрипт (`amadeus_booking_demo.py`), который показывает:

1. **Структуру авторизации:**
   - Использование OAuth 2.0 с client credentials
   - Получение access token через `/v1/security/oauth2/token`
   - Передача токена в заголовке `Authorization: Bearer {token}`

2. **Структуру запроса POST /booking/hotel-orders:**
   ```json
   {
     "data": {
       "type": "hotel-order",
       "guests": [...],
       "travelAgent": {...},
       "roomAssociations": [...],
       "payment": {...}
     }
   }
   ```

3. **Ключевые поля запроса:**
   - `guests` - массив с информацией о гостях (имя, телефон, email)
   - `travelAgent` - обязательная информация о турагенте
   - `roomAssociations` - связь между гостями и предложениями отелей
   - `payment` - платежная информация (кредитная карта)

### Анализ ответа API

**Успешный ответ содержит:**
- `id` - уникальный идентификатор заказа (например: "XD_8138319951754")
- `self` - URL для доступа к созданному заказу
- `associatedRecords` - референсы в системах поставщиков (например: "C9QHBU")
- `hotelBookings` - массив с деталями бронирований отелей

**Структура ответа:**
```json
{
  "data": [
    {
      "type": "hotel-order",
      "id": "XD_8138319951754",
      "self": "https://test.api.amadeus.com/v2/booking/hotel-orders/XD_8138319951754",
      "associatedRecords": [
        {
          "reference": "C9QHBU",
          "originSystemCode": "GDS"
        }
      ],
      "hotelBookings": [...]
    }
  ]
}
```

## Выводы и рекомендации

### Преимущества API:
1. **Широкий охват** - более 150,000 отелей по всему миру
2. **Интеграция** - часть экосистемы Amadeus с другими API (поиск, рейтинги)
3. **Стандартизация** - использует REST API и стандартные HTTP методы
4. **Документация** - подробная техническая документация с примерами

### Ограничения:
1. **Бета-версия** - API может изменяться
2. **Отсутствие отмен** - отмены бронирований только офлайн
3. **Нет комиссий** - поставщики не предлагают комиссии
4. **Зависимость от других API** - требует предварительного поиска через Hotel Search API

### Рекомендации по использованию:

1. **Для разработки:**
   - Обязательно используйте тестовую среду
   - Тестируйте только с крупными городами (LON, NYC)
   - Никогда не делайте реальные бронирования в тестах

2. **Для продакшена:**
   - Реализуйте полный цикл: Hotel List → Hotel Search → Hotel Booking
   - Обработайте ошибки и таймауты
   - Кэшируйте access token
   - Реализуйте логирование всех запросов

3. **Архитектурные соображения:**
   - API подходит для создания полноценных систем бронирования
   - Требует интеграции с платежными системами
   - Необходима система управления заказами
   - Рекомендуется резервное решение для отмен

### Следующие шаги:
1. Регистрация на платформе Amadeus для получения API ключей
2. Изучение Hotel Search API для получения offer ID
3. Тестирование полного цикла бронирования
4. Разработка обработки ошибок и edge cases
5. Интеграция с платежными системами

